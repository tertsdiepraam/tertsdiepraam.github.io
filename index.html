<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Terts Diepraam</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" type="text/css" href="styles.css">

    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">
            You are using an <strong>outdated</strong> browser. Please
            <a href="http://browsehappy.com/">upgrade your browser</a> to improve
            your experience.
            </p>
        <![endif]-->

        <div id="content">
            <div id="header">
                <img id="banner-image" src="logo.svg"></img>
                <h1 id="banner-text">Terts Diepraam</h1>
            </div>
            <div id="buttons">
                <button id="button-home">HOME</button>
                <button id="button-resume">RESUME</button>
                <button id="button-projects">PROJECTS</button>
            </div>
            <hr>
            <div id="text">
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script>
         const TEXT = {
             "HOME":
`# Home
Hi! On this website, you'll find

- my resume
- my projects
`,
             "RESUME":
`# Resume
## Education
 - Het 4e Gymnasium
 - Amsterdam University College

## Experience
 - Machine Learning Programs
 - Bit
 - Bit Academy
`,
             "PROJECTS": "These are projects.",
         };

         let text_str = "";
         let text_el = document.getElementById('text');
         updateText("HOME");

         document.getElementById('button-home').onclick = () => {
             updateText("HOME");
         }

         document.getElementById('button-resume').onclick = () => {
             updateText("RESUME");
         }

         document.getElementById('button-projects').onclick = () => {
             updateText("PROJECTS");
         }

         var STATE = 'WRITING' // or 'DELETING' or 'DONE'
         var current_char = 0;
         var current_text_key = 'HOME';
         var next_text_key = null;

         function update() {
             switch (STATE) {
                 case 'WRITING':
                     if (current_char == TEXT[current_text_key].length) {
                         STATE = 'DONE';
                     } else {
                         showUntil(current_char);
                         current_char++;
                     }
                     break;
                 case 'DELETING':
                     if (current_char <= 0) {
                         STATE = 'WRITING';
                         current_text_key = next_text_key;
                         current_char = 0;
                     } else {
                         showUntil(current_char);
                         current_char--;
                     }
                     break;
                 case 'DONE':
                     break;
             }
         }

         setInterval(update, 10);

         function showUntil(idx) {
             text_el.innerHTML = marked(TEXT[current_text_key].substr(0,idx));
             let last = text_el.lastElementChild;
             if (!last) {
                 last = document.createElement("p");
             }
             while (["UL", "OL"].includes(last.nodeName)) {
                 last = last.lastElementChild;
             }
             last.innerHTML += "<span id='cursor'>|</span>";
         }

         async function updateText(key) {
             if (current_text_key == key) {
                 STATE = 'WRITING';
             } else {
                 next_text_key = key;
                 STATE = 'DELETING';
             }
         }
        </script>
    </body>
</html>
